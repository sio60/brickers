# LDraw 스펙 레퍼런스

> 성빈 담당 - Evolver/LDR 개발용 참고 문서
> 작성일: 2026-01-14

---

## 1. 좌표계 & 단위 (LDU)

- **좌표계**: 오른손 좌표계, **-Y가 위쪽**
- **1 LDU** = 약 0.4mm
- **브릭 1칸 너비** = 20 LDU
- **브릭 높이** = 24 LDU
- **플레이트 높이** = 8 LDU (브릭의 1/3)

### 크기 계산 예시
```
1x1 브릭: 20 x 24 x 20 LDU
2x4 브릭: 40 x 24 x 80 LDU
1x1 플레이트: 20 x 8 x 20 LDU
```

---

## 2. 파일 포맷 (.ldr)

플레인 텍스트 파일. 라인 타입별로 구분됨.

### Line Type 0 - 주석/메타
```
0 // 이것은 주석입니다
0 !META command parameters
```

### Line Type 1 - 파츠 배치 (핵심!)
```
1 <색상> <x> <y> <z> <a> <b> <c> <d> <e> <f> <g> <h> <i> <파일명>
```

| 필드 | 설명 |
|------|------|
| 색상 | LDraw 색상 코드 (0-511) |
| x, y, z | 위치 좌표 (LDU) |
| a-i | 3x3 회전/스케일 행렬 |
| 파일명 | 파츠 파일 (예: 3001.dat) |

### 예시 - 빨간 2x4 브릭을 (40, 0, 20)에 배치
```
1 4 40 0 20 1 0 0 0 1 0 0 0 1 3001.dat
```
- `4` = 빨간색
- `40 0 20` = 위치 (x, y, z)
- `1 0 0 0 1 0 0 0 1` = 회전 없음 (단위행렬)
- `3001.dat` = 2x4 브릭

### 회전 행렬 예시
```
# 회전 없음 (기본)
1 0 0 0 1 0 0 0 1

# Y축 90도 회전
0 0 -1 0 1 0 1 0 0

# Y축 180도 회전
-1 0 0 0 1 0 0 0 -1

# Y축 270도 회전
0 0 1 0 1 0 -1 0 0
```

### Line Type 2 - 선 (엣지)
```
2 <색상> x1 y1 z1 x2 y2 z2
```

### Line Type 3 - 삼각형
```
3 <색상> x1 y1 z1 x2 y2 z2 x3 y3 z3
```

### Line Type 4 - 사각형
```
4 <색상> x1 y1 z1 x2 y2 z2 x3 y3 z3 x4 y4 z4
```

---

## 3. 주요 파츠 번호 (Design ID)

### 브릭 (Brick) - 높이 24 LDU
| 파츠 | Design ID | 파일명 | 크기 (LDU) |
|------|-----------|--------|------------|
| 1×1 브릭 | 3005 | 3005.dat | 20×24×20 |
| 1×2 브릭 | 3004 | 3004.dat | 20×24×40 |
| 1×3 브릭 | 3622 | 3622.dat | 20×24×60 |
| 1×4 브릭 | 3010 | 3010.dat | 20×24×80 |
| 1×6 브릭 | 3009 | 3009.dat | 20×24×120 |
| 2×2 브릭 | 3003 | 3003.dat | 40×24×40 |
| 2×3 브릭 | 3002 | 3002.dat | 40×24×60 |
| 2×4 브릭 | 3001 | 3001.dat | 40×24×80 |
| 2×6 브릭 | 2456 | 2456.dat | 40×24×120 |

### 플레이트 (Plate) - 높이 8 LDU
| 파츠 | Design ID | 파일명 | 크기 (LDU) |
|------|-----------|--------|------------|
| 1×1 플레이트 | 3024 | 3024.dat | 20×8×20 |
| 1×2 플레이트 | 3023 | 3023.dat | 20×8×40 |
| 1×3 플레이트 | 3623 | 3623.dat | 20×8×60 |
| 1×4 플레이트 | 3710 | 3710.dat | 20×8×80 |
| 2×2 플레이트 | 3022 | 3022.dat | 40×8×40 |
| 2×3 플레이트 | 3021 | 3021.dat | 40×8×60 |
| 2×4 플레이트 | 3020 | 3020.dat | 40×8×80 |
| 4×4 플레이트 | 3031 | 3031.dat | 80×8×80 |

### 슬로프 (Slope)
| 파츠 | Design ID | 파일명 | 설명 |
|------|-----------|--------|------|
| 슬로프 45° 2×1 | 3040 | 3040.dat | |
| 슬로프 45° 2×2 | 3039 | 3039.dat | |
| 역슬로프 45° 2×1 | 3665 | 3665.dat | |

---

## 4. 색상 코드

### 기본 색상
| 색상 | 코드 | HEX |
|------|------|-----|
| 검정 (Black) | 0 | #1B2A34 |
| 파랑 (Blue) | 1 | #1E5AA8 |
| 초록 (Green) | 2 | #00852B |
| 청록 (Teal) | 3 | #069D9F |
| 빨강 (Red) | 4 | #B40000 |
| 진홍 (Dark Pink) | 5 | #D3359D |
| 갈색 (Brown) | 6 | #543324 |
| 회색 (Light Gray) | 7 | #8A928D |
| 진회색 (Dark Gray) | 8 | #545955 |
| 하늘색 (Light Blue) | 9 | #97CBD9 |
| 연두 (Bright Green) | 10 | #58AB41 |
| 청옥 (Light Turquoise) | 11 | #00AAA4 |
| 연어색 (Salmon) | 12 | #F06D61 |
| 분홍 (Pink) | 13 | #F6A9BB |
| 노랑 (Yellow) | 14 | #FAC80A |
| 흰색 (White) | 15 | #F4F4F4 |

### 특수 색상
| 색상 | 코드 | 설명 |
|------|------|------|
| Main Color | 16 | 부모로부터 색상 상속 |
| Edge Color | 24 | 엣지 색상 (자동 계산) |

### 직접 색상 지정
```
0x2RRGGBB 형식으로 RGB 직접 지정
예: 0x2FF8000 = 주황색 (RGB: 255, 128, 0)
```

---

## 5. LDR 파일 예시

### 간단한 2층 구조물
```ldr
0 Simple 2-layer structure
0 Name: example.ldr
0 Author: Seongbin

1 4 0 0 0 1 0 0 0 1 0 0 0 1 3001.dat
1 4 0 -24 0 1 0 0 0 1 0 0 0 1 3001.dat
```

### 다색 구조물
```ldr
0 Multi-color example
1 4 0 0 0 1 0 0 0 1 0 0 0 1 3001.dat
1 1 80 0 0 1 0 0 0 1 0 0 0 1 3001.dat
1 14 40 -24 0 1 0 0 0 1 0 0 0 1 3001.dat
```

---

## 6. 참고 링크

- [LDraw File Format Specification](https://www.ldraw.org/article/218.html)
- [LDraw Parts Library](https://library.ldraw.org/)
- [LDraw Colour Definition](https://www.ldraw.org/article/547.html)
- [BrickLink Parts Reference](https://www.bricklink.com/catalogList.asp?catType=P&catString=5)
- [Rebrickable Parts Database](https://rebrickable.com/parts/)

---

## 7. 프로젝트 적용 메모

### JSON → LDR 변환 시 고려사항
1. Y축이 위가 아니라 -Y가 위임 (좌표 변환 필요)
2. 브릭 배치 시 스터드 정렬 (20 LDU 단위)
3. 레이어별 Y 좌표: 브릭 -24씩, 플레이트 -8씩

### Kids 모드 제한
- 1×1 파츠 제외 (삼킴 위험)
- 최소 파츠 크기: 2×2 이상 (4-6세)

---

*Updated: 2026-01-14*
